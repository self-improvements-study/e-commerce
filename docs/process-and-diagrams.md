# 1. 기능 설계 및 프로세스 흐름

## 1-1 포인트 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 포인트 조회 요청 --> B(포인트 정보 조회)
  B --> C{포인트 정보 있음?}
  C -- Yes --> D[포인트 조회 결과 반환]
  C -- No --> E[포인트 정보 없음]
  D --> F[포인트 조회 완료]
  E --> F
  F --> G[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 포인트 조회 모듈: 1. 포인트 조회 요청
  포인트 조회 모듈 ->>+ 포인트: 2. 포인트 정보 조회
  포인트->>- 포인트 조회 모듈: 3. 포인트 조회 결과 반환
  포인트 조회 모듈 ->>- 사용자: 4. 포인트 조회 성공
```

## 1-2 포인트 충전
### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 포인트 충전 요청 --> B(포인트 정보 조회)
  B --> C{포인트 검증}
  C -- 실패: 최대 충전 포인트 초과 --> D[포인트 충전 실패] --> E[End]
  C -- 성공 --> G[포인트 충전] --> H(포인트 내역 저장)
  H --> I[포인트 충전 성공]
  I --> J[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 포인트 충전 모듈: 1. 포인트 충전 요청
  포인트 충전 모듈 ->>+ 포인트: 2. 포인트 정보 조회
  포인트 -->>- 포인트 충전 모듈: 포인트 검증 실패 - 최대 충전 포인트 초과
  포인트 충전 모듈 -->> 사용자: 포인트 충전 실패
  포인트 충전 모듈 ->> 포인트: 4. 포인트 충전
  포인트 충전 모듈 ->>+ 포인트 내역: 5. 포인트 내역 저장
  포인트 내역->>- 포인트 충전 모듈: 6. 포인트 내역 저장 완료
  포인트 충전 모듈 ->>- 사용자: 7. 포인트 충전 성공
```
## 1-3 포인트 내역 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 포인트 내역 조회 요청 --> B(포인트 내역 조회)
  B --> C[포인트 내역 결과 반환]
  C --> D[포인트 내역 조회 성공]
  D --> E[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 포인트 내역 모듈: 1. 포인트 내역 조회 요청
  포인트 내역 모듈 ->>+ 포인트 내역: 2. 포인트 내역 조회
  포인트 내역 ->>- 포인트 내역 모듈: 3. 포인트 내역 결과 반환
  포인트 내역 모듈 ->>- 사용자: 4. 포인트 내역 조회 성공

```

## 1-4 상품 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 상품 조회 요청 --> B(상품 조회)
  B --> C[상품 조회 결과 반환]
  C --> D[상품 조회 성공]
  D --> E[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 상품 조회 모듈: 1. 상품 조회 요청
  상품 조회 모듈 ->>+ 상품: 2. 상품 조회
  상품 ->>- 상품 조회 모듈: 3. 상품 조회 결과 반환
  상품 조회 모듈 ->>- 사용자: 4. 상품 조회 성공

```
## 1-5 판매 우수 상품 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 판매 우수 상품 조회 요청 --> B(판매 우수 상품 조회)
  B --> C[판매 우수 상품 조회 결과 반환]
  C --> D[판매 우수 상품 조회 성공]
  D --> E[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 판매 우수 상품 조회 모듈: 1. 판매 우수 상품 조회 요청
  판매 우수 상품 조회 모듈 ->>+ 주문 내역: 2. 판매 우수 상품 조회
  주문 내역 ->>- 판매 우수 상품 조회 모듈: 3. 판매 우수 상품 조회 결과 반환
  판매 우수 상품 조회 모듈 ->>- 사용자: 4. 판매 우수 상품 조회 성공

```

## 1-6 상품 주문

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 상품 주문 요청 --> B[재고 조회]
  
  B -- 재고 부족 --> C[상품 주문 실패] --> X[End]
  B -- 재고 있음 --> D[사용자 쿠폰 조회]

  D -- 쿠폰 검증 실패 --> E[상품 주문 실패] --> Y[End]
  D -- 쿠폰 사용 가능 --> F[상품 주문 성공]
  F --> G[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 상품 주문 모듈: 1. 상품 주문 요청
  상품 주문 모듈 ->> 상품: 2. 상품 조회
  상품 ->> 상품 옵션: 3. 상품 옵션 조회
  상품 옵션 ->>+ 재고: 4. 재고 조회
  재고 -->>- 상품 주문 모듈: 재고 검증 실패 - 재고가 없을
  상품 주문 모듈 -->> 사용자: 상품 주문 실패

  상품 주문 모듈 ->>+ 쿠폰: 5. 사용자 쿠폰 조회
  쿠폰 -->>- 상품 주문 모듈: 쿠폰 검증 실패 - 유효하지 않은 쿠폰
  상품 주문 모듈 -->> 사용자: 상품 주문 실패

  상품 주문 모듈 ->>+ 재고: 6. 재고 차감
  상품 주문 모듈 ->>+ 쿠폰: 7. 쿠폰 사용

  상품 주문 모듈 ->>+ 주문: 8. 주문 내역 저장
  상품 주문 모듈 ->>- 사용자: 11. 상품 주문 성공

```

## 1-7 주문 내역 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 주문 내역 조회 요청 --> B[주문 내역 조회 모듈]
  B --> C[주문 내역 조회]
  C --> D[주문 내역 조회 결과 반환]
  D --> E[주문 내역 조회 성공]
  E --> F[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 주문 내역 조회 모듈: 1. 주문 내역 조회 요청
  주문 내역 조회 모듈 ->>+ 주문 내역: 2. 주문 내역 조회
  주문 내역 ->>- 주문 내역 조회 모듈: 3. 주문 내역 조회 결과 반환
  주문 내역 조회 모듈 ->>- 사용자: 4. 주문 내역 조회 성공

```

## 1-8 주문 상세 내역 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 주문 상세 내역 조회 요청 --> B[주문 내역 조회]
  B --> C[주문 상세 내역 조회 결과 반환]
  C --> D[주문 상세 내역 조회 성공]
  D --> E[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 주문 상세 내역 조회 모듈: 1. 주문 상세 내역 조회 요청
  주문 상세 내역 조회 모듈 ->>+ 주문 내역: 2. 주문 상세 내역 조회
  주문 내역 ->>- 주문 상세 내역 조회 모듈: 3. 주문 상세 내역 조회 결과 반환
  주문 상세 내역 조회 모듈 ->>+ 결제 내역: 4. 결제 내역 조회
  결제 내역 ->>- 주문 상세 내역 조회 모듈: 5. 결제 내역 조회 결과 반환
  주문 상세 내역 조회 모듈 ->>- 사용자: 6. 주문 상세 내역 조회 성공

```

## 1-9 주문 결제

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 주문 결제 요청 --> B[주문 조회]
  B --> C[포인트 조회]
  
  C -- 포인트 부족 --> D[주문 결제 실패] --> X[End]

  C -- 포인트 검증 성공 --> E[주문 결제 진행]
  E -->|결제 성공| F[주문 정보 전송]
  F --> G[상품 주문 성공] --> Y[End]

  E -->|결제 실패| I[출고 취소]
  I --> J[쿠폰 사용 취소]
  J --> K[주문 결제 실패] --> Z[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 주문 결제 모듈: 1. 주문 결제 요청
  주문 결제 모듈 ->>+ 주문: 2. 주문 조회
  주문 ->>- 주문 결제 모듈: 주문 정보 반환

  주문 결제 모듈 ->>+ 포인트: 3. 포인트 조회
  포인트 -->>- 주문 결제 모듈: 포인트 검증 실패 - 포인트 부족
  주문 결제 모듈 -->> 사용자: 주문 결제 실패

  alt 결제 성공
    주문 결제 모듈 ->>+ 결제: 4. 주문 결제
    결제 ->>- 주문 결제 모듈: 5. 주문 결제 정보 반환
    주문 결제 모듈 ->>+ 데이터 플랫폼: 6. 주문 정보 전송
    주문 결제 모듈 ->>- 사용자: 7. 상품 주문 성공
  else 결제 실패
    주문 결제 모듈 ->>+ 결제: 4. 주문 결제
    결제 -->>- 주문 결제 모듈: 결제 실패

    주문 결제 모듈 ->> 재고: 출고 취소
    주문 결제 모듈 ->> 쿠폰: 쿠폰 사용 취소
    주문 결제 모듈 -->> 사용자: 주문 결제 실패
  end

```

## 1-10 쿠폰 발급

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 쿠폰 발급 요청 --> B[사용자 쿠폰 확인]
  B -->|이미 발급된 쿠폰| C[쿠폰 발급 실패] --> C_End[End]
  B -->|발급 가능| E[쿠폰 확인]
  E -->|쿠폰 재고 소진| F[쿠폰 발급 실패] --> F_End[End]
  E -->|쿠폰 사용 가능| G[사용자 쿠폰 발급]
  G --> H[쿠폰 발급 완료] --> H_End[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 쿠폰 발급 모듈: 1. 쿠폰 발급 요청
  쿠폰 발급 모듈 ->>+ 쿠폰: 2. 사용자 쿠폰 확인
  쿠폰 -->>- 쿠폰 발급 모듈: 사용자 쿠폰 검증 실패 - 이미 발급된 쿠폰
  쿠폰 발급 모듈 -->> 사용자: 쿠폰 발급 실패
  쿠폰 발급 모듈 ->>+ 쿠폰: 3. 쿠폰 확인
  쿠폰 -->>- 쿠폰 발급 모듈: 쿠폰 검증 실패 - 쿠폰 소진
  쿠폰 발급 모듈 -->> 사용자: 쿠폰 발급 실패
  쿠폰 발급 모듈 ->>+ 쿠폰: 4. 사용자 쿠폰 발급
  쿠폰 ->>- 쿠폰 발급 모듈: 5. 사용자 쿠폰 발급 완료
  쿠폰 발급 모듈 ->>- 사용자: 6. 쿠폰 발급 완료

```

## 1-11 쿠폰 목록 조회

### 플로우 차트
```mermaid
flowchart LR
  A[Start] -- 유저 쿠폰 목록 조회 요청 --> B[유저 쿠폰 목록 조회]
  B --> C[유저 쿠폰 목록 조회 결과 반환]
  C --> D[유저 쿠폰 목록 조회 완료] --> E[End]
```

### 시퀀스 다이어그램
```mermaid
---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
actor 사용자
  사용자 ->>+ 유저 쿠폰 목록 조회 모듈: 1. 유저 쿠폰 목록 조회 요청
  유저 쿠폰 목록 조회 모듈 ->>+ 쿠폰: 2. 유저 쿠폰 목록 조회
  쿠폰 ->>- 유저 쿠폰 목록 조회 모듈: 3. 유저 쿠폰 목록 조회 결과 반환
  유저 쿠폰 목록 조회 모듈 ->>- 사용자: 4. 유저 쿠폰 목록 조회 완료

```